<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <script src="underbar.js"></script>
    <link rel="stylesheet" type="text/css" href="styles.css">
  </head>
  <body>
    <div class='button-nav'>
      <button name="button">Get more tweets</button>
    </div>
    <nav>
      <script>
        $(document).ready(function(){
          var $nav = $('nav');
            $('button').on('click', function(){
              $nav.html('');
              var loadTweets = function(){
                var index = streams.home.length - 1;
                var count = index;
                while(index >= 0){
                  var tweet = streams.home[index];
                  var $tweet = $('<div id="tweet"></div>').addClass(tweet.user);
                  var $message = '<a class="link" href="#">@'+tweet.user+' </a>'; 
                  //google momment.js lib for time 
                  $tweet.html($message + ': ' + tweet.message + ' ' + tweet.created_at).addClass();
                  
                  $tweet.appendTo($nav);       
                  index -= 1;
                }
              }
              loadTweets();
            });

            $('nav').on('click', '#tweet a', function(){
              $nav.html('');
              var myClass = $(this).parent().attr('class');
              var loadUserTweets = function(){
                var index = streams.home.length - 1;
                var count = index;
                while(index >= 0){
                  var tweet = streams.home[index];
                  var $tweet = $('<div id="tweet"></div>').addClass(tweet.user);
                  console.log("TWEET.USER: " +tweet.user);
                  if(myClass === tweet.user){
                    var $message = '<a class="link" href="#">@'+tweet.user+' </a>'; 
                    $tweet.html($message + ': ' + tweet.message + ' ' + tweet.created_at).addClass();
                    $tweet.appendTo($nav);       
                  }
                  index -= 1;
                }
              }
              loadUserTweets();
            })  
        });
      </script>
    </nav>
  </body>
</html>














